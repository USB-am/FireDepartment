#:import os_join os.path.join
#:import Config config
#:import FDLabel,FDTitleLabel,FDButton UI.custom_widgets

<MainPage>
	BoxLayout:
		orientation: 'vertical'
		spacing: 5

		# === TOOLBAR === #
		BoxLayout:
			canvas:
				Color:
					rgba: Config.BACKGROUND_COLOR_OPACITY
				Rectangle:
					pos: self.pos
					size: self.size

			size_hint: (1, None)
			size: (self.width, 70)
			padding: 10

			FDLabel:
				size_hint: (None, None)
				size: (50, 50)

			FDTitleLabel:
				text: 'Fire Department'

			FDButton:
				size_hint: (None, None)
				size: (50, 50)
				on_press: root.manager.current = 'settings'

				Image:
					width: self.parent.width - 10
					height: self.parent.height - 10
					x: self.parent.x + 5
					y: self.parent.y + 5
					source: os_join(Config.IMAGES_DIR, 'settings_button.png')
		# === TOOLBAR === #


		# === SEARCH BLOCK === #
		BoxLayout:
			size_hint: (1, None)
			size: (self.width, 50)
			padding: [15, 0]
			spacing: 10

			TextInput:
				multiline: False
				font_size: int(Config.FONT_SIZE * 1.5)
				padding_y: [self.height/2 - (self.line_height/2) * len(self._lines), 0]
				id: text_input

			FDButton:
				size_hint: (None, None)
				size: (50, 50)
				id: search_btn
				on_press:
					print('Search button is pressed!')

				Image:
					width: self.parent.width - 10
					height: self.parent.height - 10
					x: self.parent.x + 5
					y: self.parent.y + 5
					source: os_join(Config.IMAGES_DIR, 'search_button.png')
		# === SEARCH BLOCK === #


		# === CONTENT === #
		BoxLayout:
			ScrollView:
				GridLayout:
					cols: 1
					size_hint: (1, None)
					height: self.minimum_height
					do_scroll_x: False
					padding: 15
					spacing: 10
					id: post_list
		# === CONTENT === #


<PostItem>
	size_hint: (1, None)
	size: (self.width, 70)
	color: Config.FONT_COLOR
	background_color: Config.BACKGROUND_COLOR_OPACITY
	text: self.view_text
	on_press:
		app.root.current = 'post_page'
		app.root.current_screen.fill_info(self.post)