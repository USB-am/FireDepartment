#:import os os
#:import Config config

<EditPages>
	BoxLayout:
		orientation: 'vertical'

		BoxLayout:
			canvas:
				Color:
					rgba: (1, 1, 1, .5)
				Rectangle:
					pos: self.pos
					size: self.size

			size_hint: (1, None)
			size: (self.width, 70)
			padding: 10
			spacing: 10

			Button:
				size_hint: (None, None)
				size: (50, 50)
				on_press: app.root.current = 'settings'

				Image:
					source: os.path.join(Config.IMAGES_DIR, 'back_button.png')
					size: self.parent.size
					x: self.parent.x
					y: self.parent.y + 5
					allow_stretch: True

			Label:
				font_size: 30
				text: 'Редактирование'

			Label:
				size_hint: (None, None)
				size: (50, 50)

		ScrollView:
			GridLayout:
				cols: 1
				height: self.minimum_height
				do_scroll_x: False
				size_hint: (1, None)
				padding: 10
				spacing: 10
				id: db_row_frame


<EditDBRow>
	size_hint: (1, None)
	size: (self.width, 50)

	Label:
		font_size: 20
		text_size: self.size
		halign: 'left'
		valign: 'middle'
		text: str(self.parent.db_item)

	Button:
		size_hint: (None, None)
		size: (40, 40)
		valign: 'middle'
		on_press:
			app.root.current = self.parent.to_page
			app.root.get_screen(app.root.current).get_item(self.parent.db_item)

		Image:
			source: os.path.join(Config.IMAGES_DIR, 'edit_button.png')
			size: self.parent.size
			x: self.parent.x
			y: self.parent.y
			allow_stretch: True


<EditPage>
	BoxLayout:
		orientation: 'vertical'

		BoxLayout:
			canvas:
				Color:
					rgba: (1, 1, 1, .5)
				Rectangle:
					pos: self.pos
					size: self.size

			size_hint: (1, None)
			size: (self.width, 70)
			padding: 10
			spacing: 10

			Button:
				size_hint: (None, None)
				size: (50, 50)
				on_press: app.root.current = app.root.current + 's'

				Image:
					source: os.path.join(Config.IMAGES_DIR, 'back_button.png')
					size: self.parent.size
					x: self.parent.x
					y: self.parent.y + 5
					allow_stretch: True

			Label:
				font_size: 30
				id: title

			Label:
				size_hint: (None, None)
				size: (50, 50)

		ScrollView:
			GridLayout:
				cols: 1
				height: self.minimum_height
				do_scroll_x: False
				size_hint: (1, None)
				padding: 10
				spacing: 10
				id: fields_frame

		BoxLayout:
			size_hint: (1, None)
			size: (self.width, 110)
			padding: 20

			Button:
				id: apply_changes_button
				text: 'Изменить'
				on_press: app.root.current = f'{app.root.current}s'


<StringField>
	size_hint: (1, None)
	size: (self.width, 50)

	Label:
		size_hint: (.3, 1)
		font_size: 16
		text_size: self.size
		halign: 'left'
		valign: 'middle'
		text: self.parent.show_text

	TextInput:
		size_hint: (.7, 1)
		font_size: 16
		multiline: False
		padding_y: [self.height/2 - (self.line_height/2) * len(self._lines), 0]
		id: text_input
		text: self.parent.value


<TimeField>
	size_hint: (1, None)
	size: (self.width, 50)

	Label:
		size_hint: (.7, 1)
		font_size: 16
		text_size: self.size
		halign: 'left'
		valign: 'middle'
		text: self.parent.show_text

	TextInput:
		size_hint: (.3, 1)
		font_size: 16
		multiline: False
		padding_y: [self.height/2 - (self.line_height/2) * len(self._lines), 0]
		halign: 'right'
		valign: 'middle'
		id: text_input
		text: self.parent.show_time


<PhoneField>
	size_hint: (1, None)
	size: (self.width, 50)

	Label:
		size_hint: (.3, 1)
		text_size: self.size
		font_size: 16
		halign: 'left'
		valign: 'middle'
		text: self.parent.show_text

	TextInput:
		size_hint: (.7, 1)
		multiline: False
		padding_y: [self.height/2 - (self.line_height/2) * len(self._lines), 0]
		font_size: 16
		valign: 'middle'
		text: self.parent.show_phone_number
		id: text_input